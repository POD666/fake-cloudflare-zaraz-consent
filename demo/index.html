<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zaraz Consent Tools Demo</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
</head>
<body class="bg-slate-50">
    <div class="min-h-screen">
        <div class="max-w-6xl mx-auto p-4 lg:p-6">
            <h1 class="text-3xl lg:text-4xl font-bold text-slate-900 mb-4">
                üç™ Fake Cloudflare Zaraz Consent - Live Demo
            </h1>
            <p class="text-slate-700 mb-6">
                This demo demonstrates all features of the fake Zaraz consent management system for local development.
            </p>

            <!-- Loading indicator -->
            <div id="loading" class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8">
                <div class="text-blue-800">‚è≥ Loading demo...</div>
            </div>

            <!-- Info Boxes -->
            <div class="space-y-4 mb-8">
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <strong class="text-blue-800">üìö API Reference:</strong> This demo implements the official
                    <a
                        href="https://developers.cloudflare.com/zaraz/consent-management/api/"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-blue-600 underline hover:text-blue-800"
                    >
                        Cloudflare Zaraz Consent API
                    </a>
                    - all code examples below work with real Zaraz in production.
                </div>

                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                    <strong class="text-green-800">üì¶ Installation:</strong> Add this package to your local development setup:
                    <div class="bg-black text-green-400 p-3 mt-2 rounded font-mono text-sm">
                        npm install fake-cloudflare-zaraz-consent
                    </div>
                    <div class="mt-2">
                        <strong class="text-green-800">üîó Links:</strong>
                        <a
                            href="https://github.com/POD666/fake-cloudflare-zaraz-consent"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="text-green-600 underline hover:text-green-800 mr-4"
                        >
                            GitHub Repository
                        </a>
                        <a
                            href="https://www.npmjs.com/package/fake-cloudflare-zaraz-consent"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="text-green-600 underline hover:text-green-800"
                        >
                            npm Package
                        </a>
                    </div>
                </div>
            </div>

            <!-- Status -->
            <div id="status" class="bg-white border border-slate-200 rounded-lg p-6 mb-8 border-l-4 border-l-blue-500">
                <h3 class="text-xl font-semibold text-slate-800 mb-4">Fake Zaraz Status</h3>
                <div id="status-content" class="mb-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Will be populated by JS -->
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                    <div id="code-example" class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">
                        <!-- Will be populated by JS -->
                    </div>
                    <div id="status-output" class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">
                        <!-- Will be populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Controls Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Modal Controls -->
                <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                    <h3 class="text-lg font-semibold text-slate-800 mb-4">Modal Controls</h3>
                    <div class="space-y-4">
                        <div class="space-y-2">
                            <button id="show-modal" class="px-4 py-2 rounded font-medium transition-colors bg-blue-600 text-white hover:bg-blue-700">
                                Show Consent Modal
                            </button>
                            <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">// Using zaraz-ts
import { showConsentModal } from 'zaraz-ts';
showConsentModal();</div>
                        </div>
                        <div class="space-y-2">
                            <button id="hide-modal" class="px-4 py-2 rounded font-medium transition-colors bg-slate-600 text-white hover:bg-slate-700">
                                Hide Modal
                            </button>
                            <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">window.zaraz.consent.modal = false;</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                    <h3 class="text-lg font-semibold text-slate-800 mb-4">Quick Actions</h3>
                    <div class="space-y-4">
                        <div class="space-y-2">
                            <button id="accept-all" class="px-4 py-2 rounded font-medium transition-colors bg-blue-600 text-white hover:bg-blue-700">
                                Accept All
                            </button>
                            <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">// Using zaraz-ts
import { acceptAllConsent } from 'zaraz-ts';
acceptAllConsent();</div>
                        </div>
                        <div class="space-y-2">
                            <button id="reject-all" class="px-4 py-2 rounded font-medium transition-colors bg-red-600 text-white hover:bg-red-700">
                                Reject All
                            </button>
                            <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">// Using zaraz-ts
import { rejectAllConsent } from 'zaraz-ts';
rejectAllConsent();</div>
                        </div>
                        <div class="space-y-2">
                            <button id="reset-consent" class="px-4 py-2 rounded font-medium transition-colors bg-slate-600 text-white hover:bg-slate-700">
                                Reset Consent
                            </button>
                            <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">window.zaraz.consent.set({
  functional: true,
  analytics: false,
  marketing: false,
  preferences: false
});</div>
                        </div>
                    </div>
                </div>

                <!-- Individual Purposes -->
                <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                    <h3 class="text-lg font-semibold text-slate-800 mb-4">Individual Purposes</h3>
                    <div id="purposes-container" class="space-y-3">
                        <!-- Will be populated by JS -->
                    </div>
                    <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap mt-4">// Get consent for specific purpose
const hasAnalytics = window.zaraz.consent.get('analytics');

// Set consent for specific purpose
window.zaraz.consent.set({ analytics: true });

// Using zaraz-ts for conditional loading
import { ifConsentGranted } from 'zaraz-ts';
await ifConsentGranted('analytics', () => {
  // Load analytics script
  console.log('Analytics enabled');
});</div>
                </div>

                <!-- Advanced (zaraz-ts) -->
                <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                    <h3 class="text-lg font-semibold text-slate-800 mb-4">Advanced (zaraz-ts)</h3>
                    <div class="space-y-4">
                        <div class="space-y-2">
                            <button id="simulate-scripts" class="px-4 py-2 rounded font-medium transition-colors bg-blue-600 text-white hover:bg-blue-700">
                                Simulate Script Loading
                            </button>
                            <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">// Using zaraz-ts for conditional loading
import { ifConsentGranted } from 'zaraz-ts';
await ifConsentGranted('analytics', () => {
  loadAnalyticsScript();
});</div>
                        </div>
                        <div class="space-y-2">
                            <button id="debug-consent" class="px-4 py-2 rounded font-medium transition-colors bg-blue-600 text-white hover:bg-blue-700">
                                Debug Consent State
                            </button>
                            <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">// Using zaraz-ts debug function
import { debugConsentState } from 'zaraz-ts';
await debugConsentState();</div>
                        </div>
                        <div class="space-y-2">
                            <button id="test-advanced" class="px-4 py-2 rounded font-medium transition-colors bg-slate-600 text-white hover:bg-slate-700">
                                Test Advanced Features
                            </button>
                            <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">// Test zaraz-ts features
import { getAllConsent, hasConsentBeenSet } from 'zaraz-ts';
const consent = await getAllConsent();
const isSet = await hasConsentBeenSet();</div>
                        </div>
                        <div class="space-y-2">
                            <button id="send-queued" class="px-4 py-2 rounded font-medium transition-colors bg-blue-600 text-white hover:bg-blue-700">
                                Send Queued Events
                            </button>
                            <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">window.zaraz.consent.sendQueuedEvents();</div>
                        </div>
                        <div class="space-y-2">
                            <button id="clear-storage" class="px-4 py-2 rounded font-medium transition-colors bg-red-600 text-white hover:bg-red-700">
                                Clear Storage
                            </button>
                            <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">// Clear consent storage and reload
localStorage.removeItem('demo_consent');
location.reload();</div>
                        </div>
                        <div class="space-y-2">
                            <button id="get-consent" class="px-4 py-2 rounded font-medium transition-colors bg-slate-600 text-white hover:bg-slate-700">
                                Get All Consent
                            </button>
                            <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap">// Using zaraz-ts
import { getAllConsent } from 'zaraz-ts';
const consent = await getAllConsent();
console.log(consent);</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Logs -->
            <div class="bg-white border border-slate-200 rounded-lg p-6">
                <h3 class="text-xl font-semibold text-slate-800 mb-4">Console Logs & Events</h3>
                <div class="bg-slate-100 border border-slate-300 rounded px-3 py-2 font-mono text-xs text-slate-700 overflow-x-auto whitespace-pre-wrap mb-4">// Listen for consent events (traditional)
document.addEventListener('zarazConsentAPIReady', () => {
  console.log('Zaraz Consent API is ready');
});

// Using zaraz-ts for consent changes
import { onConsentChange } from 'zaraz-ts';
const unsubscribe = onConsentChange((consent) => {
  console.log('Consent updated:', consent);
});

// Global tools available in console
window.zarazConsentTools.debug();
window.zarazConsentTools.getAll();</div>
                <div id="loaded-scripts" class="mb-4 p-3 bg-green-50 border border-green-200 rounded hidden">
                    <strong class="text-green-800">üì¶ Simulated Loaded Scripts:</strong>
                    <ul id="scripts-list" class="mt-2 list-disc list-inside text-sm text-green-700">
                        <!-- Will be populated by JS -->
                    </ul>
                </div>
                <div id="global-tools-status" class="mb-4 p-3 bg-blue-50 border border-blue-200 rounded hidden">
                    <strong class="text-blue-800">üõ†Ô∏è Global Tools Enabled:</strong>
                    <div class="mt-2 text-sm text-blue-700">
                        Open browser console (F12) and try: <code class="bg-blue-100 px-1 rounded">window.zarazConsentTools.debug()</code>
                    </div>
                </div>
                <div id="logs" class="bg-slate-100 border border-slate-300 rounded p-4 max-h-64 overflow-y-auto font-mono text-sm">
                    <div class="text-blue-600 py-1">Logs will appear here...</div>
                </div>
                <button id="clear-logs" class="mt-4 px-4 py-2 rounded font-medium transition-colors bg-slate-600 text-white hover:bg-slate-700">
                    Clear Logs
                </button>
            </div>
        </div>
    </div>

    <script type="module" src="/src/main.js"></script>
</body>
</html>
